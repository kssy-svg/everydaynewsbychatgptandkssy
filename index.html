<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>チャット & ニュース</title>
<style>
body { font-family:sans-serif; margin:0; background:#111; color:#fff; display:flex; flex-direction:column; height:100vh; }
nav { display:flex; padding:10px; background:#222; }
nav button { margin-right:10px; padding:6px 12px; cursor:pointer; color:#fff; background:#555; border:none; border-radius:4px; }
nav button.active { background:#0af; }

section { display:none; flex:1; height:calc(100vh - 50px); overflow:auto; }
section.active { display:flex; flex-direction:column; }

#chat { display:flex; flex-direction:column; flex:1; justify-content:space-between; padding:10px; }
#top,#bottom { flex:1; display:flex; justify-content:center; align-items:center; font-size:3em; border-bottom:1px solid #444; }
#bottom { border-bottom:none; }
input { width:90%; padding:10px; font-size:1.2em; border-radius:8px; border:none; }
#news ul { list-style:none; padding:0; }
#news li { margin-bottom:10px; cursor:pointer; text-decoration:underline; color:#0af; }
</style>
</head>
<body>
<nav>
<button id="tab-news">ニュース</button>
<button id="tab-chat" class="active">リアルタイムチャット</button>
</nav>

<section id="news-section">
<div id="news">読み込み中…</div>
</section>

<section id="chat-section" class="active">
<div id="chat">
  <div id="top">自分の文字</div>
  <div id="bottom">相手の文字</div>
  <input id="input" placeholder="文字を打つと上にリアルタイム表示">
</div>
</section>

<script>
document.addEventListener("DOMContentLoaded", ()=>{

  // タブ切り替え
  const newsBtn = document.getElementById("tab-news");
  const chatBtn = document.getElementById("tab-chat");
  const newsSec = document.getElementById("news-section");
  const chatSec = document.getElementById("chat-section");

  newsBtn.addEventListener("click", ()=>{
    newsSec.classList.add("active");
    chatSec.classList.remove("active");
    newsBtn.classList.add("active");
    chatBtn.classList.remove("active");
  });
  chatBtn.addEventListener("click", ()=>{
    chatSec.classList.add("active");
    newsSec.classList.remove("active");
    chatBtn.classList.add("active");
    newsBtn.classList.remove("active");
  });

  // ニュース取得（Yahoo! RSS例）
  async function fetchNews() {
    const proxyUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent('https://news.yahoo.co.jp/rss/topics/top-picks.xml');
    try {
      const res = await fetch(proxyUrl);
      const data = await res.json();
      const parser = new DOMParser();
      const xml = parser.parseFromString(data.contents, "text/xml");
      const items = xml.querySelectorAll("item");
      let html = "<ul>";
      items.forEach(item=>{
        const title = item.querySelector("title").textContent;
        const link = item.querySelector("link").textContent;
        html += `<li onclick="window.open('${link}','_blank')">${title}</li>`;
      });
      html += "</ul>";
      document.getElementById("news").innerHTML = html;
    } catch(e) {
      document.getElementById("news").textContent = "ニュースの取得に失敗しました"
    }
  }
  fetchNews();

  // リアルタイムチャット（本物用に置き換え可）
  const top = document.getElementById("top");
  const bottom = document.getElementById("bottom");
  const input = document.getElementById("input");

  // 自分の入力をリアルタイム表示
  input.addEventListener("input", ()=>{
    top.textContent = input.value;
  });

  // 本物の相手通信はここにWebSocketやFirebaseを組み込む
});
</script>
</body>
</html>
